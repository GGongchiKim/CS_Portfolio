
<section id="network-plan" style="font-family: 'Pretendard', sans-serif; line-height: 1.8; color: #222; max-width: 900px; margin: auto;">

  <h1 style="text-align:center; margin-top:40px;">🧭 네트워크 적용 구조 </h1>
  <p style="text-align:center; color:#666;">― 오프라인 게임의 완성도와 온라인 서비스의 안정성을 함께 고려한 설계 계획 ―</p>

  <hr style="margin:30px 0;">

  <h2>🎯 설계 배경</h2>
  <p>
    『헌터 인 더 게이트』는 오프라인 기반의 <strong>육성 시뮬레이션 + 덱빌딩 로그라이크</strong> 게임이다.<br>
    그렇기 때문에 네트워크 기능을 단순히 추가하는 것이 아니라,
    <strong>게임의 본질적 구조를 해치지 않으면서도 서비스 확장성을 확보하는 방법</strong>을 고민했다.
  </p>
  <p>
    이 섹션은 실제 구현이 아닌, 네트워크 구조를 <strong>계획하고 구상하는 과정에서의 사고 확장</strong>을 정리한 것이다.
  </p>

  <hr style="margin:30px 0;">

  <h2>📘 초기 구상 – 오프라인 중심 + 네트워크 상점 분리</h2>
  <p>
    초안에서는 게임의 핵심 데이터(세이브, 전투, 육성)는 모두 로컬에서 관리하고,<br>
    <strong>결제 및 유료 아이템만 서버와 연동</strong>되도록 구상했다.
  </p>
  <p>
    이를 위해 인게임에 별도의 <strong>‘네트워크 슬롯’</strong>을 두고,
    결제를 통해 획득한 아이템이 이 슬롯으로만 전달되며,
    사용 시 서버 로그가 갱신되는 형태를 상상했다.
  </p>

  <div style="background:#fafafa; border-left:4px solid #c0c0c0; padding:15px; margin:20px 0;">
    <ul>
      <li>🎮 인게임 플레이: 완전 오프라인 진행</li>
      <li>🛒 네트워크 슬롯: 서버와 통신하여 유료 아이템만 관리</li>
      <li>🔄 사용 시 서버 로그 업데이트 (데이터베이스 연동)</li>
    </ul>
  </div>

  <p>
    이 구조는 게임의 몰입도를 해치지 않으면서, 외부 결제 시스템을 안전하게 분리할 수 있다는 장점이 있었다.
  </p>

  <hr style="margin:30px 0;">

  <h2>⚠️ 문제 인식 – 세이브 파일 복제 위험</h2>
  <p>
    그러나 구상을 정리하면서 <strong>세이브 파일이 로컬에 존재한다면 복제될 위험이 있다</strong>는 점을 인식했다.<br>
    예를 들어 한 사용자가 인앱 결제로 유료 아이템을 대량 구매한 뒤,
    세이브 파일을 배포하면 다른 이용자들도 동일한 데이터를 사용할 수 있다.
  </p>
  <p>
    이는 서버 검증이 없는 한, 결제 시스템 전체를 무력화할 수 있는 구조적 문제였다.
  </p>

  <hr style="margin:30px 0;">

  <h2>🧩 개선 구상 – 클라우드 세이브 기반의 하이브리드 구조</h2>
  <p>
    이를 해결하기 위해 세이브 데이터를 서버 중심으로 이전하고,
    로컬은 단순한 임시 캐시로만 사용하는 구조를 구상했다.
    즉, <strong>‘로컬 캐시 + 서버 세이브 + 네트워크 슬롯’</strong>의 삼중 구조이다.
  </p>

  <div style="background:#f7f9fc; border-left:4px solid #4a90e2; padding:15px; margin:20px 0;">
    <ul>
      <li>💾 <strong>로컬 캐시</strong> : 임시 저장 및 빠른 로드용</li>
      <li>☁️ <strong>서버 세이브</strong> : 공식 세이브 데이터 (검증 및 서명 포함)</li>
      <li>🧭 <strong>네트워크 슬롯</strong> : 결제·보상 아이템 전용 데이터 (DB 관리)</li>
    </ul>
  </div>

  <h3>데이터 흐름 요약</h3>
  <pre style="background:#fff; border:1px solid #ddd; padding:15px; border-radius:8px;">
1️⃣ 플레이어가 게임을 진행하면 로컬 캐시에 임시 저장된다.
2️⃣ 세이브 시점 또는 종료 시점에 서버로 데이터가 업로드된다.
3️⃣ 서버는 결제 로그와 아이템 소유량을 검증한 뒤 공식 세이브를 갱신한다.
4️⃣ 검증된 세이브만 서명(Signature)되어 다음 접속 시 유효한 데이터로 인식된다.
  </pre>

  <hr style="margin:30px 0;">

  <h2>🔒 보안 및 안정성 고려</h2>
  <p>
    결제 및 보상 처리 과정은 <strong>트랜잭션 단위</strong>로 묶여 진행되며,
    모든 통신은 암호화되어 전송된다는 가정을 두었다.
  </p>
  <ul>
    <li>결제 검증 → 아이템 지급 → 로그 기록이 하나의 원자적 과정으로 처리됨</li>
    <li>모든 요청은 인증 토큰을 포함하고, 서버는 응답에 서명을 남김</li>
    <li>네트워크 오류가 발생하더라도, 오프라인 플레이는 안전하게 유지됨</li>
  </ul>

  <hr style="margin:30px 0;">

  <h2>🧭 구조 흐름도 (한글)</h2>
  <pre style="background:#fff; border:1px solid #ccc; padding:20px; border-radius:8px; font-size:15px;">
[클라이언트]
 ├─ 로컬 캐시 (임시 세이브)
 ├─ 클라우드 세이브 (서버 검증)
 └─ 네트워크 슬롯 (유료 아이템)

        │  암호화 통신 / 트랜잭션 처리
        ▼

[게임 서버]
 ├─ 세이브 검증
 ├─ 결제 로그 확인
 └─ 보상 지급 및 암호화 저장

        ▼

[데이터베이스]
 ├─ player_save (세이브 데이터)
 ├─ item_data (아이템 정보)
 └─ transaction_log (결제 기록)
  </pre>

  <hr style="margin:30px 0;">

  <h2>🧠 설계 철학</h2>
  <blockquote style="font-style:italic; color:#333; border-left:4px solid #aaa; padding-left:15px; margin:20px 0;">
    “플레이의 자유는 로컬에, 데이터의 신뢰는 서버에 둔다.”
  </blockquote>
  <p>
    실제 구현은 이루어지지 않았지만, 구상 과정에서  
    <strong>“오프라인 게임도 온라인 검증 구조를 품을 수 있다”</strong>는 가능성을 확인했다.
  </p>

  <p>
    처음에는 오프라인 완결성만을 중시했지만,  
    세이브 복제 문제를 계기로 데이터의 신뢰성과 보안의 중요성을 인식하게 되었다.  
    그 결과, 플레이 경험과 서비스 운영의 균형을 함께 고려한 구조를 설계할 수 있었다.
  </p>

  <hr style="margin:30px 0;">

  <h2>📘 정리</h2>
  <table style="width:100%; border-collapse:collapse; text-align:left;">
    <tr style="background:#f2f2f2;">
      <th style="padding:8px; border:1px solid #ccc;">항목</th>
      <th style="padding:8px; border:1px solid #ccc;">내용</th>
    </tr>
    <tr>
      <td style="padding:8px; border:1px solid #ccc;">구상 범위</td>
      <td style="padding:8px; border:1px solid #ccc;">게임 내 네트워크 및 세이브 관리 구조 (계획 단계)</td>
    </tr>
    <tr>
      <td style="padding:8px; border:1px solid #ccc;">핵심 포인트</td>
      <td style="padding:8px; border:1px solid #ccc;">오프라인 구조 유지 + 클라우드 세이브 및 보상 검증 통합</td>
    </tr>
    <tr>
      <td style="padding:8px; border:1px solid #ccc;">문제 인식</td>
      <td style="padding:8px; border:1px solid #ccc;">세이브 복제 시 결제 시스템 무력화 가능성</td>
    </tr>
    <tr>
      <td style="padding:8px; border:1px solid #ccc;">개선 방향</td>
      <td style="padding:8px; border:1px solid #ccc;">클라우드 세이브 및 서버 검증 기반 하이브리드 구조</td>
    </tr>
    <tr>
      <td style="padding:8px; border:1px solid #ccc;">설계 의도</td>
      <td style="padding:8px; border:1px solid #ccc;">게임의 몰입감을 유지하면서도 서비스 수준의 안정성 확보</td>
    </tr>
  </table>
  
   <hr style="margin:30px 0;">


</section>
